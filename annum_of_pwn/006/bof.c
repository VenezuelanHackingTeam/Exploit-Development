#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdint.h>
// -no-pie
// ASLR on ; NX on ; CANARY on
void id_index() {
    long id[]={0};
    int index;
    printf("What index is your id?: ");
    scanf("%d", &index);
    printf("%p", id[index]);
}
void id_update() {
    puts("Feature is under maintenence!");
}
void intro() {
    int len;
    char src[256];
    printf("Enter length of your id (MAX : 256): ");
    scanf("%d", &len);
    printf("Enter your id: ");
    read(0,src,len);
    if (strlen(src)>len) {
        puts("Too large!");
        exit(1);
    }
}
void menu() {
    int op;
    while(1) {
        printf("[1] intro\n[2] get id\n[3] update id\nEnter: ");
        scanf("%d", &op);
        switch (op) {
            case 1:
                intro();
                break;
            case 2:
                id_index();
                break;
            case 3:
                id_update();
                break;
        }
    }
}
int main() {
    menu();
    return 0;
}
__attribute__((constructor))
void setup() { // for remote binary, sockets will buffer output
    setvbuf(stdout, NULL, _IONBF, 0);
    setvbuf(stdin, NULL, _IONBF, 0);
}
